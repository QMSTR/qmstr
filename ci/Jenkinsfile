pipeline {
    agent { label 'linux' }
    triggers {
        pollSCM('H/10 * * * *')
    }
    stages {
        stage('document_test') {
            steps {
                sh '''#!/bin/bash -e
                    export VAGRANT_VAGRANTFILE=ci/Vagrantfile
                    vagrant up
                    vagrant ssh -c /vagrant/ci/vagrant-test-documentation-driver.sh
                    RESULT=$?
                    vagrant destroy -f
                '''
            }
        }
    }
}